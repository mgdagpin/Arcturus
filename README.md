

# Arcturus (Clean Architecture Template)

This solution architecture is inspired of Clean Architecture by [Robert C. Martin](ttps://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html) and with help of [Vincent Dagpin](https://github.com/vgdagpin)  Dependency Injection approaches.

## Technologies

- NET Core 3.1
- Entity Framework Core 3.1
- [CQRS pattern with MediatR](https://www.nuget.org/packages/MediatR/)
- [FluentValidator](https://www.nuget.org/packages/FluentValidator/)
- [MiniProfiler](https://www.nuget.org/packages/MiniProfiler.AspNetCore/) with EFCore
- Object-Object Mapping [AutoMapper](https://www.nuget.org/packages/AutoMapper/)
- Database Migrations


##  Goals
The goal of this repository is to provide a basic solution structure that can be used to build Domain-Driven Design (DDD)-based applications using .NET Core. 

##  Overview
**Migration**
This layer contains only DbContextModelSnapshot which was generated by migrations to keep track of changes you make to your EF models.

**Domain**
This layer contains all entities aggregates, enums, exceptions, event handlers and so on.

**Application**
This layer contains all application/business logic and model. It is dependent on the domain layer.

**Infrastructure**
This layer contains classes that accessing external resources particularly web services, server resources, SMTP and so on. Also, the persistence layer

**WebUI**
The entry point of the application is the ASP.NET Core web project.

## Discussions
Join our discord channel [https://discord.gg/GdHCtHn](https://discord.gg/GdHCtHn)



----

Connecting same dbContext to linked server


Create linked server script
``` SQL
USE master

DECLARE @serverName NVARCHAR(100) = 'LS_v13'
DECLARE @dataSource NVARCHAR(100) = '(localdb)\ProjectsV13'

IF EXISTS(SELECT * from sys.servers WHERE name = @serverName)
BEGIN
    DECLARE @serverId INT
    SELECT @serverId = server_id FROM sys.servers WHERE name = @serverName
    IF EXISTS(SELECT * FROM sys.linked_logins WHERE server_id = @serverId)
    BEGIN
        EXEC sp_droplinkedsrvlogin @serverName, null
    END

    EXEC sp_dropserver @serverName
END

EXEC sp_addlinkedserver     
   @server=@serverName,   
   @provider=N'SQLNCLI',   
   @srvproduct=N'',
   @datasrc=@dataSource;  
EXEC sp_addlinkedsrvlogin
    @rmtsrvname=@serverName,
	@useself = 'true'

```

Added migration LS